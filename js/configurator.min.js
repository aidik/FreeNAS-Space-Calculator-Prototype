/**
 * jQuery serializeObject
 * @copyright 2014, macek <paulmacek@gmail.com>
 * @link https://github.com/macek/jquery-serialize-object
 * @license BSD
 * @version 2.5.0
 */
function systemChange(){$("#hdd_count, #dram, #read_cache, #write_cache, #nic").prop("disabled",!1),null===$("#dram").val()&&$("#dram").val(16),"8"===this.value?($("#hdd_count").val(8),$("#dram").val(32),$("#dram option[value='16']").prop("disabled",!0),$("#hdd_count option[value='5']").prop("disabled",!1),$("#hdd_count option[value='6']").prop("disabled",!1),$("#hdd_count option[value='7']").prop("disabled",!1),$("#hdd_count option[value='8']").prop("disabled",!1)):"4"===this.value&&($("#hdd_count").val(4),$("#dram option[value='16']").prop("disabled",!1),$("#hdd_count option[value='5']").prop("disabled",!0),$("#hdd_count option[value='6']").prop("disabled",!0),$("#hdd_count option[value='7']").prop("disabled",!0),$("#hdd_count option[value='8']").prop("disabled",!0)),$("#hdd_count").change()}function countChange(){return this.value>1?($("#hdd_size, #hdd_raid").prop("disabled",!1),$("#hdd_raid option").prop("disabled",!1),null===$("#hdd_raid").val()&&$("#hdd_raid").val("Z1"),null===$("#hdd_size").val()&&$("#hdd_size").val("4"),this.value<4&&($("#hdd_raid option[value='Z3']").prop("disabled",!0),$("#hdd_raid option[value='10']").prop("disabled",!0),$("#hdd_raid").val("Z1")),void(this.value<3&&($("#hdd_raid option[value='Z2']").prop("disabled",!0),$("#hdd_raid").val("Z1")))):this.value>0?($("#hdd_size").prop("disabled",!1),$("#hdd_raid").prop("disabled",!0).val(""),void(null===$("#hdd_size").val()&&$("#hdd_size").val("4"))):void $("#hdd_size, #hdd_raid").prop("disabled",!0).val("")}function doCalulations(){serializeForm(),calculateTotalPrize(),calculateSpace()}function serializeForm(){var a=$("#fnc_form").serialize();machine=$("#fnc_form").serializeObject(),$("#get_output").text(a),$("#json_output").text(JSON.stringify(machine))}function calculateTotalPrize(){var a=0;if("yes"===machine.read_cache&&(a+=145),"yes"===machine.write_cache&&(a+=115),"yes"===machine.nic&&(a+=150),"4"===machine.system){switch(a+=999.99,machine.dram){case"16":a+=0;break;case"32":a+=150;break;case"64":a+=200}switch(machine.hdd_size){case"0":a+=0*machine.hdd_count;break;case"1":a+=71.25*machine.hdd_count;break;case"2":a+=100*machine.hdd_count;break;case"3":a+=125*machine.hdd_count;break;case"4":a+=175*machine.hdd_count;break;case"6":a+=312*machine.hdd_count}}else if("8"===machine.system){switch(a+=1499.99,machine.dram){case"32":a+=0;break;case"64":a+=200}switch(machine.hdd_size){case"0":a+=0*machine.hdd_count;break;case"1":a+=81.25*machine.hdd_count;break;case"2":a+=106.25*machine.hdd_count;break;case"3":a+=125*machine.hdd_count;break;case"4":a+=162*machine.hdd_count;break;case"6":a+=287.5*machine.hdd_count}}else a="N/A";$("#total b").text("$"+(Math.round(100*(a+1e-5))/100).toFixed(2))}function calculateSpace(){var a,b,c={1:"0.914",2:"1.814",3:"2.443",4:"3.643",6:"5.457"},d=machine.hdd_count*machine.hdd_size;switch(console.log((machine.hdd_count-1)*c[machine.hdd_size]),console.log(Math.round((machine.hdd_count-1)*c[machine.hdd_size]*100)/100),machine.hdd_raid){case"10":a=machine.hdd_count*(c[machine.hdd_size]/2),b=d/2;break;case"Z1":a=(machine.hdd_count-1)*c[machine.hdd_size],b=(machine.hdd_count-1)*machine.hdd_size;break;case"Z2":a=(machine.hdd_count-2)*c[machine.hdd_size],b=(machine.hdd_count-2)*machine.hdd_size;break;case"Z3":a=(machine.hdd_count-3)*c[machine.hdd_size],b=(machine.hdd_count-3)*machine.hdd_size}$("#raw b").text((Math.round(100*(d+1e-5))/100).toFixed(2)+" TB"),$("#usable b").text((Math.round(100*(a+1e-5))/100).toFixed(2)+" TB"),$("#marketed b").text((Math.round(100*(b+1e-5))/100).toFixed(2)+" TB")}!function(a,b){if("function"==typeof define&&define.amd)define(["exports","jquery"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("jquery");b(exports,c)}else b(a,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b){function c(a,c){function e(a,b,c){return a[b]=c,a}function f(a,b){for(var c,f=a.match(d.key);void 0!==(c=f.pop());)if(d.push.test(c)){var h=g(a.replace(/\[\]$/,""));b=e([],h,b)}else d.fixed.test(c)?b=e([],c,b):d.named.test(c)&&(b=e({},c,b));return b}function g(a){return void 0===n[a]&&(n[a]=0),n[a]++}function h(a){switch(b('[name="'+a.name+'"]',c).attr("type")){case"checkbox":return"on"===a.value?!0:a.value;default:return a.value}}function i(b){if(!d.validate.test(b.name))return this;var c=f(b.name,h(b));return m=a.extend(!0,m,c),this}function j(b){if(!a.isArray(b))throw new Error("formSerializer.addPairs expects an Array");for(var c=0,d=b.length;d>c;c++)this.addPair(b[c]);return this}function k(){return m}function l(){return JSON.stringify(k())}var m={},n={};this.addPair=i,this.addPairs=j,this.serialize=k,this.serializeJSON=l}var d={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return c.patterns=d,c.serializeObject=function(){return new c(b,this).addPairs(this.serializeArray()).serialize()},c.serializeJSON=function(){return new c(b,this).addPairs(this.serializeArray()).serializeJSON()},"undefined"!=typeof b.fn&&(b.fn.serializeObject=c.serializeObject,b.fn.serializeJSON=c.serializeJSON),a.FormSerializer=c,c});/*
 *  FreeNAS-Configurator - v. 0.0.1
 *  https://ixsystems.com
 *
 *  Made by Vaclav Navratil
 *  Under MIT License
 */
var machine={};$(document).ready(function(){console.log("ready!"),$("#hdd_size, #hdd_raid, #dram").prop("disabled",!0).val(""),$("#system4, #system8").on("change",systemChange),$("#hdd_count").on("change",countChange),$("#system4, #system8, #hdd_count, #dram, #read_cache, #write_cache, #nic, #hdd_size, #hdd_raid").on("change",doCalulations)});